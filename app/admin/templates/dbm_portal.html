<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DB Management Portal</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h1 class="mb-4">Database Management Portal</h1>
    <form method="post" action="/admin/dbm">
        <div class="mb-3">
            <label for="action" class="form-label">Select Action</label>
            <select class="form-select" id="action" name="action">
                <option value="view_users">View Users</option>
                <option value="add_user">Add User</option>
                <option value="delete_user">Delete User</option>
                <option value="backup_db">Backup Database</option>
                <option value="restore_db">Restore Database</option>
            </select>
        </div>
        <div class="mb-3" id="userFields" style="display:none;">
            <label for="username" class="form-label">Username</label>
            <input type="text" class="form-control" id="username" name="username">
        </div>
        <div class="mb-3" id="fileFields" style="display:none;">
            <label for="file" class="form-label">Backup File</label>
            <input type="text" class="form-control" id="file" name="file">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <hr>
    {% if result %}
    <div class="alert alert-info mt-4">
        <h4>Result:</h4>
        <pre>{{ result }}</pre>
    </div>
    {% endif %}
</div>
<script>
    const actionSelect = document.getElementById('action');
    const userFields = document.getElementById('userFields');
    const fileFields = document.getElementById('fileFields');
    actionSelect.addEventListener('change', function() {
        userFields.style.display = ['add_user', 'delete_user'].includes(this.value) ? 'block' : 'none';
        fileFields.style.display = ['restore_db'].includes(this.value) ? 'block' : 'none';
    });
</script>
</body>
</html>
